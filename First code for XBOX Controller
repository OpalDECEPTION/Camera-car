import pygame
from pygame.locals import *
import time
from smbus2 import SMBus

addr = 0x8 # bus address
bus = SMBus(1) # indicates /dev/ic2-1

# Initialize the joysticks.
pygame.init()
joystick_count = pygame.joystick.get_count()

for i in range(joystick_count):
    joystick = pygame.joystick.Joystick(i)
    joystick.init()
    print(f"Joystick {i} name: {joystick.get_name()}")
    print(f"Number of axes: {joystick.get_numaxes()}")
    print(f"Number of buttons: {joystick.get_numbuttons()}")
    print(f"Number of hats: {joystick.get_numhats()}")

running = True
while running:

    xJoy = joystick.get_axis(2)
    yJoy = joystick.get_axis(3)

    xJoy = xJoy * 5 + 5
    yJoy = yJoy * -5 + 5

    yJoy = int(yJoy)
    xJoy = int(xJoy)

   # print(f"xjoy: {xJoy}, yjoy: {yJoy}")
   # print(" ")

    xJoy = xJoy + 48

    bus.write_byte(addr, xJoy)


    time.sleep(0.05)

    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

pygame.quit()
